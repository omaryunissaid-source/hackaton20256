<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Smart Tour ‚Äî –ì–æ—Ä–Ω—ã–µ –ø–æ—Ö–æ–¥—ã –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞</title>
  <meta name="description" content="Smart Tour ‚Äî —É–º–Ω—ã–π –ø–æ–¥–±–æ—Ä –≥–æ—Ä–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—É."/>
  <style>
    :root{
      --bg:#0f1412; --card:#111a17; --alt:#0b1210; --ink:#ecf7f1; --muted:#a9bdb6; --line:#24312c;
      --emerald:#4ed2aa; --emerald-2:#2aa585; --sky:#88c9f2; --cta:#ff7b52; --pill:#13211c;
      --shadow:0 14px 40px rgba(0,0,0,.16); --radius:16px; --radius-lg:20px;
      --hero-fg:#e8f7f1; --hero-overlay:linear-gradient(180deg,rgba(8,12,11,.95) 0%, rgba(8,12,11,.75) 48%, rgba(8,12,11,.1) 78%); /* –£—Å–∏–ª–µ–Ω –æ–≤–µ—Ä–ª–µ–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
      --good:#36d399; --warn:#ffd166; --bad:#ff6b6b; --star:#ffc107;
      --shield:#62e5be;
    }
    [data-theme="light"]{
      --bg:#ffffff; --card:#ffffff; --alt:#f6faf8; --ink:#151816; --muted:#6c7d76; --line:#e6ece9;
      --emerald:#0F4C3A; --emerald-2:#178764; --sky:#2A7FBA; --cta:#FF6A3D; --pill:#eef6f2;
      --shadow:0 10px 30px rgba(0,0,0,.08); --hero-fg:#ffffff; --hero-overlay:linear-gradient(180deg,rgba(12,18,16,.95) 0%, rgba(12,18,16,.75) 48%, rgba(12,18,16,.1) 78%);
      --shield:#1ac58f;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg)}
    img{max-width:100%;display:block}
    a{color:var(--sky);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1200px;margin:0 auto;padding:0 22px}
    .hide{display:none!important}

    header{position:sticky;top:0;background:rgba(15,20,18,.55);backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid var(--line);z-index:50}
    [data-theme="light"] header{background:rgba(255,255,255,.74)}
    .nav{display:flex;align-items:center;justify-content:space-between;height:70px;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand-badge{width:38px;height:38px;border-radius:11px;background:linear-gradient(135deg,var(--emerald),var(--emerald-2));display:grid;place-items:center;color:#fff;font-weight:900}
    .brand-title{display:flex;flex-direction:column}
    .brand-title b{font-weight:900;line-height:1}
    .brand-title span{font-size:12px;color:var(--muted);margin-top:2px}
    .menu{display:flex;gap:22px}
    .menu a{color:var(--ink);font-weight:700;opacity:.92}
    .menu a.active{color:var(--emerald)}
    .timebox{display:flex;align-items:center;gap:10px}
    .dot{width:8px;height:8px;border-radius:50%;background:#4caf50;box-shadow:0 0 8px #4caf50}

    .contact-icons{display:flex;align-items:center;gap:10px}
    .icon-btn{width:36px;height:36px;display:grid;place-items:center;border:1px solid var(--line);border-radius:10px;background:var(--card);color:var(--ink);transition:.2s transform,.2s background}
    .icon-btn:hover{transform:translateY(-1px);background:var(--alt)}
    .icon-btn svg{width:18px;height:18px}

    .toggler{width:84px;height:40px;border-radius:24px;padding:4px;background:var(--card);border:1px solid var(--line);box-shadow:var(--shadow);position:relative;cursor:pointer;display:flex;align-items:center;justify-content:space-between}
    .toggler .ico{width:22px;height:22px;display:grid;place-items:center;margin:0 8px;opacity:.8}
    .toggler .sun{color:#f7c85a} .toggler .moon{color:#c7d2fe}
    .toggler .knob{position:absolute;top:4px;left:4px;width:32px;height:32px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #ffffffaa, #f0f0f0aa);border:1px solid rgba(0,0,0,.22);box-shadow:inset 0 2px 6px rgba(0,0,0,.06), 0 2px 8px rgba(0,0,0,.16);transition:left .25s, background .25s, border-color .25s, backdrop-filter .25s}
    [data-theme="light"] .toggler .knob{border-color:rgba(0,0,0,.18)}
    [data-theme="dark"] .toggler .knob{left:48px;background:transparent;border-color:rgba(255,255,255,.32);backdrop-filter:saturate(140%) blur(2.5px);box-shadow:0 0 0 1px rgba(255,255,255,.12) inset, 0 2px 10px rgba(0,0,0,.3)}

    .btn,.cta,.btn-outline{position:relative;overflow:hidden;border:none;border-radius:14px;padding:10px 14px;font-weight:800;cursor:pointer;transition:.2s transform,.2s opacity}
    .cta{background:var(--cta);color:#fff}
    .btn{background:var(--emerald);color:#fff}
    .btn-outline{background:transparent;border:1px solid var(--emerald);color:var(--emerald)}
    .btn:active,.cta:active,.btn-outline:active{transform:translateY(1px)}
    .btn::after,.cta::after,.btn-outline::after{content:"";position:absolute;left:var(--x,50%);top:var(--y,50%);width:0;height:0;border-radius:50%;background:rgba(255,255,255,.35);transform:translate(-50%,-50%);transition:width .35s,height .35s,opacity .6s;opacity:.6;pointer-events:none}
    .ripple::after{width:260px;height:260px;opacity:0}

    .hero{
        background:var(--hero-overlay), var(--alt); /* –£–¥–∞–ª–µ–Ω–æ —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
        color:var(--hero-fg)
    }
    .hero-wrap{display:grid;grid-template-columns:1.05fr .95fr;gap:32px;align-items:center;padding:84px 0}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:#ffffff22;border:1px solid #ffffff33;font-weight:800;font-size:14px;margin-bottom:12px}

    .section{padding:68px 0}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    @media(max-width:1100px){ .grid{grid-template-columns:1fr 1fr} .two{grid-template-columns:1fr} .hero-wrap{grid-template-columns:1fr} }
    @media(max-width:640px){ .grid{grid-template-columns:1fr} }
    .panel{background:var(--card);border:1px solid var(--line);border-radius:var(--radius-lg);padding:16px;box-shadow:var(--shadow)}
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ç–æ-–∫–∞—Ä—Ç–æ—á–µ–∫ –≤ —Å–µ–∫—Ü–∏–∏ "–ü–æ—á–µ–º—É –≥–æ—Ä—ã" */
    .photo-panel{padding:20px; /* –£–≤–µ–ª–∏—á–µ–Ω –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø, —Ç–∞–∫ –∫–∞–∫ –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */ overflow:hidden;background:var(--card);border-radius:var(--radius-lg);border:1px solid var(--line);box-shadow:var(--shadow)}
    .photo-panel img{display:none} /* –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–≥ img */
    .photo-panel:hover img{transform:none}
    .photo-panel-body{padding:0; padding-top:10px} /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω padding */

    .muted{color:var(--muted)}

    .mini-filters{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
    .filter{position:relative}
    .filter .chip{background:var(--pill);border:1px solid var(--line);color:var(--ink);display:flex;gap:6px;align-items:center}
    .filter select, .filter input[type="range"]{position:absolute; inset:0; opacity:0; cursor:pointer;}
    .filter .value{font-weight:800}
    .budget-preview{display:inline-block;min-width:56px;text-align:center}

    .card{background:var(--card);border:1px solid var(--line);border-radius:18px;overflow:hidden;display:flex;flex-direction:column;box-shadow:var(--shadow);transition:transform .2s, box-shadow .2s}
    .card:hover{transform:translateY(-3px)}
    .card > img { display: none; } /* –°–∫—Ä—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Route Card */
    .card-body{padding:16px;display:flex;flex-direction:column;gap:10px}
    .card-row{display:grid;grid-template-columns:1fr;gap:10px;align-items:center} /* –ò–∑–º–µ–Ω–µ–Ω –Ω–∞ 1fr –¥–ª—è Schedule Card */
    .thumb{display:none} /* –°–∫—Ä—ã–≤–∞–µ–º –º–∏–Ω–∏–∞—Ç—é—Ä—ã –≤ Schedule Card */
    .card-row:hover .thumb{transform:none}
    .pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;background:var(--pill);color:var(--ink);font-size:12px;font-weight:800;border:1px solid var(--line);cursor:default}

    details.summary-card{border:1px solid var(--line);border-radius:14px;padding:12px;background:var(--alt)}
    details summary{cursor:pointer;font-weight:900;list-style:none;display:flex;align-items:center;gap:8px}
    details summary::before{content:"‚ÑπÔ∏è"; font-size:16px}
    details summary::-webkit-details-marker{display:none}
    .spec{display:grid;grid-template-columns:1fr 2fr;gap:8px;align-items:start}
    .spec .k{font-weight:800;color:var(--ink)}
    .spec .v{color:var(--muted)}
    .mini-gallery{display:none} /* –°–∫—Ä—ã–≤–∞–µ–º –º–∏–Ω–∏-–≥–∞–ª–µ—Ä–µ—é */

    .comments{margin-top:10px;display:grid;gap:10px}
    .comment{display:grid;grid-template-columns:40px 1fr;gap:10px;align-items:start;border:1px solid var(--line);background:var(--card);border-radius:12px;padding:10px}
    .avatar-icon{width:40px;height:40px;border-radius:50%;background:var(--pill);display:grid;place-items:center;border:1px solid var(--line);font-size:20px} /* –ù–æ–≤—ã–π —Å—Ç–∏–ª—å –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ */
    .meta{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .handle{color:var(--muted);font-size:12px}
    .rating{display:inline-flex;align-items:center;gap:6px;color:var(--star);font-weight:900}
    .stars{display:inline-flex;gap:2px}
    .stars svg{width:14px;height:14px;fill:var(--star)}
    .comment .actions{display:flex;gap:8px;margin-top:6px}
    .tag-btn{font-size:12px;border:1px solid var(--line);background:var(--alt);padding:4px 8px;border-radius:8px;cursor:pointer}
    .tag-btn:hover{background:var(--card)}
    .comment .photos{display:none} /* –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö */

    .safety-list{display:grid;gap:12px}
    .safety-item{border:1px solid var(--line);border-radius:14px;background:var(--card);padding:14px;position:relative;overflow:hidden}
    .safety-item h3{margin:0 0 6px 0}
    .safety-icon{position:absolute;right:14px;top:14px;opacity:.2;transform:scale(1);animation:float 6s ease-in-out infinite}
    .safety-icon svg{width:64px;height:64px;fill:var(--shield)}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}

    .reveal{opacity:0;transform:translateY(18px);transition:opacity .5s ease, transform .5s ease}
    .reveal.in{opacity:1;transform:translateY(0)}
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –°—Ç–∏–∫–µ—Ä–æ–≤ */
    .sticker-box{
      width:72px;height:72px;
      border-radius:50%;
      background:#fff;
      box-shadow:0 6px 16px rgba(0,0,0,0.12);
      border:3px solid #fff;
      display:grid;place-items:center;
      margin:0 auto 16px auto;
      font-size:32px;
      transform:rotate(-3deg);
      transition:transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .panel:hover .sticker-box{transform:rotate(3deg) scale(1.1)}
    .center-text{text-align:center}

    .modal{position:fixed; inset:0; background:#0008; display:none; align-items:center; justify-content:center; padding:20px; z-index:120}
    .modal.open{display:flex}
    .dialog{background:var(--card);border-radius:18px;border:1px solid var(--line);box-shadow:var(--shadow);max-width:900px;width:100%;padding:18px;color:var(--ink)}

    footer{background:#0b382c;color:#cfe9df;padding:28px 0}
    footer a{color:#cfe9df}
    .footgrid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="brand-badge">ST</div>
        <div class="brand-title">
          <b>Smart Tour</b>
          <span>–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ—Ä–Ω—ã–π —Ç—É—Ä–∏–∑–º –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞</span>
        </div>
      </div>
      <nav class="menu" aria-label="–ú–µ–Ω—é">
        <a href="#home" data-route>–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="#routes" data-route>–ú–∞—Ä—à—Ä—É—Ç—ã</a>
        <a href="#schedule" data-route>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a>
        <a href="#safety" data-route>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</a>
      </nav>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="contact-icons" title="–°–≤—è–∑–∞—Ç—å—Å—è">
          <a class="icon-btn" href="tel:+994707179908"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M22 16.92v3a2 2 0 0 1-2.18 2c-9.4-.8-16.74-8.14-17.54-17.54A2 2 0 0 1 4.28 2h3a2 2 0 0 1 2 1.72c.12.86.32 1.7.6 2.5a2 2 0 0 1-.45 2.11l-1.27 1.27a16 16 0 0 0 6.35 6.35l1.27-1.27a2 2 0 0 1 2.11-.45c.8.28 1.64.48 2.5.6A2 2 0 0 1 22 16.92z"/></svg></a>
          <a class="icon-btn" href="mailto:mammadzade.r.raul@gmail.com"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"/><path d="m22 6-10 7L2 6"/></svg></a>
          <a class="icon-btn" href="https://t.me/smart_tour" target="_blank" rel="noopener"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M9.04 15.47 8.9 19.1c.33 0 .48-.14.65-.31l1.57-1.5 3.25 2.39c.6.33 1.03.16 1.2-.55l2.18-10.25c.22-1-.38-1.39-1.03-1.15L3.7 11.2c-.98.38-.96.94-.17 1.19l3.84 1.2 8.94-5.64c.42-.27.8-.12.49.15"/></svg></a>
        </div>
        <div class="timebox" title="Asia/Baku"><span class="dot"></span><span id="azTime" style="font-weight:900">‚Äî:‚Äî</span></div>
        <div class="toggler" id="themeToggle" role="button" tabindex="0">
          <div class="ico sun">‚òÄÔ∏è</div><div class="ico moon">üåô</div><div class="knob"></div>
        </div>
      </div>
    </div>
  </header>

  <main id="view-home">
    <section class="hero">
      <div class="container hero-wrap">
        <div class="reveal in">
          <div class="chip">–ì–æ—Ä—ã –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞ ‚Ä¢ Smart Tour</div>
          <h1 style="font-size:48px;line-height:1.05;margin-bottom:10px">
            –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ö–æ–¥–∞: –º–∞—Ä—à—Ä—É—Ç, –∫–∞—Ä—Ç–∞, —Ä–∏—Å–∫–∏, –¥–∞—Ç–∞.
          </h1>
          <p class="muted" style="color:var(--hero-fg);opacity:.95;font-size:18px">
            Smart Tour –ø–æ–¥–±–∏—Ä–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–æ—â–∞–µ—Ç –∑–∞–ø–∏—Å—å –Ω–∞ —É–¥–æ–±–Ω—É—é –¥–∞—Ç—É.
          </p>
          <div class="mini-filters" id="miniFilters">
            <div class="filter"><span class="chip">–†–µ–≥–∏–æ–Ω: <span class="value" id="fRegionLabel">–õ—é–±–æ–π</span></span><select id="fRegion"><option value="">–õ—é–±–æ–π</option><option>–ë–æ–ª—å—à–æ–π –ö–∞–≤–∫–∞–∑</option><option>–ú–∞–ª—ã–π –ö–∞–≤–∫–∞–∑</option><option>–¢–∞–ª—ã—à—Å–∫–∏–µ –≥–æ—Ä—ã</option></select></div>
            <div class="filter"><span class="chip">–°–ª–æ–∂–Ω–æ—Å—Ç—å: <span class="value" id="fDiffLabel">–õ—é–±–∞—è</span></span><select id="fDiff"><option value="">–õ—é–±–∞—è</option><option>–õ–µ–≥–∫–æ</option><option>–°—Ä–µ–¥–Ω–µ</option><option>–°–ª–æ–∂–Ω–æ</option></select></div>
            <div class="filter"><span class="chip">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: <span class="value" id="fDurLabel">–õ—é–±–∞—è</span></span><select id="fDur"><option value="">–õ—é–±–∞—è</option><option>1 –¥–µ–Ω—å</option><option>2-3 –¥–Ω—è</option><option>4+ –¥–Ω—è</option></select></div>
            <div class="filter"><span class="chip">–°–µ–∑–æ–Ω: <span class="value" id="fSeasonLabel">–õ—é–±–æ–π</span></span><select id="fSeason"><option value="">–õ—é–±–æ–π</option><option>–í–µ—Å–Ω–∞</option><option>–õ–µ—Ç–æ</option><option>–û—Å–µ–Ω—å</option><option>–ó–∏–º–∞</option></select></div>
            <div class="filter"><span class="chip">–ë—é–¥–∂–µ—Ç: <span class="value budget-preview" id="fBudgetLabel">‚â§ 200</span> ‚Çº</span><input id="fBudget" type="range" min="80" max="600" step="10" value="200"/></div>
          </div>
        </div>
        <div></div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2 class="reveal" style="text-align:center">–ü–æ—á–µ–º—É –≤—ã–±—Ä–∞—Ç—å –Ω–∞—Å?</h2>
        <p class="reveal muted" style="text-align:center;max-width:600px;margin:0 auto 32px auto">
          –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –æ–ø—ã—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–µ–ª—è–µ—Ç –Ω–∞—Å —Å—Ä–µ–¥–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤.
        </p>
        <div class="grid">
          <div class="panel reveal center-text">
            <div class="sticker-box">üé®</div>
            <b>–ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</b>
            <p class="muted">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø—Ä–∏—è—Ç–Ω—ã–º.</p>
          </div>
          <div class="panel reveal center-text">
            <div class="sticker-box">üìÖ</div>
            <b>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥–∞—Ç—É</b>
            <p class="muted">–í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—É—é –¥–∞—Ç—É –∏ –∑–∞–±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ —Ç—É—Ä –æ–Ω–ª–∞–π–Ω –∑–∞ –º–∏–Ω—É—Ç—ã –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–≤–æ–Ω–∫–æ–≤.</p>
          </div>
          <div class="panel reveal center-text">
            <div class="sticker-box">üõ°Ô∏è</div>
            <b>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</b>
            <p class="muted">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≥–∏–¥—ã, —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7 –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –ø—É—Ç–∏.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section" style="background:var(--alt)">
      <div class="container">
        <h2 class="reveal" style="text-align:center">–ü–æ—á–µ–º—É –ì–æ—Ä—ã? üåÑ</h2>
        <p class="reveal muted" style="margin-bottom:32px; text-align:center; max-width:700px; margin-left:auto; margin-right:auto;">
          –ú—ã –∑–Ω–∞–µ–º, –≤—ã –ª—é–±–∏—Ç–µ –º–æ—Ä–µ. –ù–æ –≤–æ—Ç —Ç—Ä–∏ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —Ö–æ—Ç—è –±—ã —Ä–∞–∑ —Å–º–µ–Ω–∏—Ç—å –ø–ª—è–∂ –Ω–∞ –≥–æ—Ä–Ω—É—é —Ç—Ä–æ–ø—É:
        </p>
        <div class="grid">
          <div class="photo-panel reveal">
            <div class="photo-panel-body" style="padding-top:0">
              <h3 style="margin-top:0">üî≠ –ù–æ–≤—ã–µ –í–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è</h3>
              <p class="muted">–ü–ª—è–∂ ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å–Ω–æ, –Ω–æ –≥–æ—Ä—ã ‚Äî —ç—Ç–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ. –°–º–µ–Ω–∏—Ç–µ –≤–∏–¥ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞ –Ω–∞ –≤–µ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∏–∫–∏.</p>
            </div>
          </div>
          <div class="photo-panel reveal">
            <div class="photo-panel-body" style="padding-top:0">
              <h3 style="margin-top:0">‚ö° –≠–Ω–µ—Ä–≥–∏—è –∏ –¢–æ–Ω—É—Å</h3>
              <p class="muted">–ê–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö –∑–∞—Ä—è–∂–∞–µ—Ç —Å–∏–ª—å–Ω–µ–µ –ª–µ–Ω–∏–≤–æ–≥–æ. –ì–æ—Ä–Ω—ã–π –≤–æ–∑–¥—É—Ö –∏ –¥–≤–∏–∂–µ–Ω–∏–µ –¥–∞–¥—É—Ç –∑–∞—Ä—è–¥ –±–æ–¥—Ä–æ—Å—Ç–∏ –Ω–∞ –º–µ—Å—è—Ü.</p>
            </div>
          </div>
          <div class="photo-panel reveal">
            <div class="photo-panel-body" style="padding-top:0">
              <h3 style="margin-top:0">üßò –ü–æ–ª–Ω—ã–π –î–∑–µ–Ω</h3>
              <p class="muted">–í –≥–æ—Ä–∞—Ö —Ç–∏—à–∏–Ω–∞ –æ—Å–æ–±–µ–Ω–Ω–∞—è. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è "—Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–µ—Ç–æ–∫—Å–∞" –∏ –µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø—Ä–∏—Ä–æ–¥–æ–π.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <main id="view-routes" class="hide">
    <section class="section">
      <div class="container">
        <h2 class="reveal">–ú–∞—Ä—à—Ä—É—Ç—ã</h2>
        <p class="muted reveal">–û—Ç–∫—Ä–æ–π—Ç–µ ‚Äú–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏‚Äù, –∑–∞—Ç–µ–º ‚Äú–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ‚Äù, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ä—Ç –∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã.</p>
        <div id="routesGrid" class="grid"></div>
      </div>
    </section>
  </main>

  <main id="view-schedule" class="hide">
    <section class="section">
      <div class="container">
        <h2 class="reveal">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
        <p class="muted reveal">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç –∏ –∑–∞–¥–∞–π—Ç–µ —É–¥–æ–±–Ω—É—é –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–µ –∑–∞–ø–∏—Å–∏.</p>
        <div class="grid" id="scheduleGrid"></div>
      </div>
    </section>
  </main>

  <main id="view-safety" class="hide">
    <section class="section">
      <div class="container">
        <h2 class="reveal">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ—Ö–æ–¥–æ–≤</h2>
        <p class="muted reveal">–û—Å–Ω–æ–≤—ã–≤–∞–µ–º—Å—è –Ω–∞ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö —Ç—Ä–µ–∫–∫–∏–Ω–≥–∞ –∏ –∞–ª—å–ø–∏–Ω–∏–∑–º–∞.</p>
        <div class="safety-list">
          <div class="safety-item reveal">
            <div class="safety-icon"><svg viewBox="0 0 24 24"><path d="M12 2l7 3v5c0 5-3.5 9.5-7 11-3.5-1.5-7-6-7-11V5l7-3z"/></svg></div>
            <h3>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</h3>
            <ul class="muted"><li>–û—Ü–µ–Ω–∏–≤–∞–π—Ç–µ —Ñ–æ—Ä–º—É. –ù–µ –±–µ—Ä–∏—Ç–µ ‚Äú—Å–ª–æ–∂–Ω–æ‚Äù –±–µ–∑ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏.</li><li>–ó–Ω–∞–π—Ç–µ –Ω–∞–±–æ—Ä –≤—ã—Å–æ—Ç—ã –∏ —Ä–∏—Å–∫–∏ (–æ–±–ª–µ–¥–µ–Ω–µ–Ω–∏–µ, –∫–∞–º–Ω–µ–ø–∞–¥—ã).</li></ul>
          </div>
          <div class="safety-item reveal">
            <div class="safety-icon"><svg viewBox="0 0 24 24"><path d="M3 6l9-4 9 4v6c0 5-3 9-9 11C6 21 3 17 3 12V6z"/></svg></div>
            <h3>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</h3>
            <ul class="muted"><li>–û–±—É–≤—å: —Ç—Ä–µ–∫–±–æ—Ç–∏–Ω–∫–∏.</li><li>–û–¥–µ–∂–¥–∞: –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ—Å—Ç—å.</li><li>–ù–∞–≤–∏–≥–∞—Ü–∏—è: –∫–∞—Ä—Ç–∞/—Ç—Ä–µ–∫, —Ñ–æ–Ω–∞—Ä—å.</li><li>–ê–ø—Ç–µ—á–∫–∞: –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è.</li></ul>
          </div>
          <div class="safety-item reveal">
            <div class="safety-icon"><svg viewBox="0 0 24 24"><path d="M2 12l5 5L22 4"/></svg></div>
            <h3>–ì—Ä—É–ø–ø–∞</h3>
            <ul class="muted"><li>–ú–∏–Ω–∏–º—É–º –≤–¥–≤–æ—ë–º. –°–æ–æ–±—â–∞–π—Ç–µ –ø–ª–∞–Ω –±–ª–∏–∑–∫–∏–º.</li><li>–°–≤—è–∑—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞ ‚Äî –æ—Ñ–ª–∞–π–Ω‚Äë–∫–∞—Ä—Ç—ã.</li></ul>
          </div>
          <div class="safety-item reveal">
            <div class="safety-icon"><svg viewBox="0 0 24 24"><path d="M2 7h20M5 7v13M19 7v13M8 20h8"/></svg></div>
            <h3>–≠–∫–æ–ª–æ–≥–∏—è</h3>
            <ul class="muted"><li>Leave No Trace: —É–Ω–æ—Å–∏—Ç–µ –º—É—Å–æ—Ä, –∏–¥–∏—Ç–µ –ø–æ —Ç—Ä–æ–ø–∞–º.</li></ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footgrid">
      <div>¬© Smart Tour ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ—Ä–Ω—ã–π —Ç—É—Ä–∏–∑–º –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞</div>
      <div style="text-align:right"><a href="#routes" data-route>–ú–∞—Ä—à—Ä—É—Ç—ã</a> ‚Ä¢ <a href="#schedule" data-route>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a> ‚Ä¢ <a href="#safety" data-route>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</a></div>
    </div>
  </footer>

  <div class="modal" id="mapModal">
    <div class="dialog">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h3 id="mapTitle">–õ–æ–∫–∞—Ü–∏—è</h3>
        <button class="btn-outline" onclick="closeModal('mapModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div id="mapWrap" style="border-radius:14px;overflow:hidden;border:1px solid var(--line);height:520px;background:#000"></div>
      <div class="muted" style="margin-top:8px">OpenStreetMap: –º–∞—Ä–∫–µ—Ä ‚Äî –æ—Ä–∏–µ–Ω—Ç–∏—Ä —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Ç–æ—á–∫–∏.</div>
    </div>
  </div>

  <div class="modal" id="bookingModal">
    <div class="dialog" style="max-width:560px">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3>–ó–∞–ø–∏—Å—å –Ω–∞ –ø–æ—Ö–æ–¥</h3>
        <button class="btn-outline" onclick="closeModal('bookingModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div class="two" style="margin-top:8px">
        <div><div class="muted">–ú–∞—Ä—à—Ä—É—Ç</div><input id="bkRoute" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:12px;background:var(--bg);color:var(--ink)"></div>
        <div><div class="muted">–î–∞—Ç–∞</div><input id="bkDate" type="date" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:12px;background:var(--bg);color:var(--ink)"></div>
        <div><div class="muted">–ò–º—è</div><input id="bkName" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:12px;background:var(--bg);color:var(--ink)"></div>
        <div><div class="muted">–¢–µ–ª–µ—Ñ–æ–Ω</div><input id="bkPhone" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:12px;background:var(--bg);color:var(--ink)"></div>
      </div>
      <div class="muted" style="margin-top:8px">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</div>
      <textarea id="bkNote" rows="3" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:12px;background:var(--bg);color:var(--ink)"></textarea>
      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px">
        <button class="btn-outline" onclick="closeModal('bookingModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn" id="submitBookingBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <script>
    // –ë–∞–∑–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (5)
    // –í—Å–µ –ø–æ–ª—è img —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
    const routesBase = [
      { 
        id:1, 
        title:'–ë–∞–∑–∞—Ä–¥—é–∑—é (4466 –º) ‚Äî –≤–µ—Ä—à–∏–Ω–∞ –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞', 
        region:'–ì—É–±–∞-–ì—É—Å–∞—Ä', 
        difficulty:'–°–ª–æ–∂–Ω–æ', 
        duration:'3-4 –¥–Ω—è', 
        season:'–ò—é–ª—å-–°–µ–Ω', 
        budget:350, 
        elevation:'4466 –º / ‚Äî', 
        img:'', 
        coords:{lat:41.258,lng:47.788,zoom:11}, 
        rating:4.8 
      },
      { 
        id:2, 
        title:'–ö—è–ø–∞–∑ (3065 –º) ‚Äî –≤–∏–¥ –Ω–∞ 7 –æ–∑—ë—Ä', 
        region:'–ì—è–Ω–¥–∂–∞-–ö–∞–∑–∞—Ö', 
        difficulty:'–õ–µ–≥–∫–∏–π', 
        duration:'1 –¥–µ–Ω—å', 
        season:'–ú–∞–π-–û–∫—Ç', 
        budget:150, 
        elevation:'3065–º / 1200–º', 
        img:'', 
        coords:{lat:40.407,lng:46.338,zoom:12}, 
        rating:4.2 
      },
      { 
        id:3, 
        title:'–¢—É—Ñ–∞–Ω–¥–∞–≥ (4191 –º) ‚Äî —Å–≤—è—â–µ–Ω–Ω—ã–π –ø–∏–∫', 
        region:'–ì–∞–±–∞–ª–∞', 
        difficulty:'–°—Ä–µ–¥–Ω–∏–π', 
        duration:'2 –¥–Ω—è', 
        season:'–ò—é–Ω—å-–û–∫—Ç', 
        budget:220, 
        elevation:'4191–º / 1800–º', 
        img:'', 
        coords:{lat:40.940,lng:47.882,zoom:12}, 
        rating:4.4 
      },
      { 
        id:4, 
        title:'–®–∞—Ö–¥–∞–≥ (4243 –º) ‚Äî —Ü–∞—Ä—å-–≥–æ—Ä–∞', 
        region:'–ë–æ–ª—å—à–æ–π –ö–∞–≤–∫–∞–∑', 
        difficulty:'–°—Ä–µ–¥–Ω–µ', 
        duration:'1 –¥–µ–Ω—å', 
        season:'–õ–µ—Ç–æ', 
        budget:180, 
        elevation:'+800 –º', 
        img:'', 
        coords:{lat:41.275,lng:48.019,zoom:11}, 
        rating:4.3 
      },
      { 
        id:5, 
        title:'–ë–µ—à–±–∞—Ä–º–∞–≥ ‚Äî —Å–∫–∞–ª–∞ –∂–µ–ª–∞–Ω–∏–π', 
        region:'–•—ã–∑—ã', 
        difficulty:'–õ–µ–≥–∫–æ', 
        duration:'1 –¥–µ–Ω—å', 
        season:'–û—Å–µ–Ω—å', 
        budget:110, 
        elevation:'+260 –º', 
        img:'', 
        coords:{lat:41.288,lng:49.117,zoom:12}, 
        rating:4.1 
      },
    ];
    const routesExtra = [
      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
      { 
        id:103, 
        title:"–•—ã–Ω–∞–ª—ã–≥", 
        region:"–ì—É–±–∞-–ì—É—Å–∞—Ä", 
        difficulty:"–õ–µ–≥–∫–∏–π", 
        duration:"1 –¥–µ–Ω—å", 
        season:"–ú–∞–π-–ù–æ—è", 
        budget:140, 
        elevation:"+500 –º", 
        img:"", 
        coords:{lat:41.161,lng:48.243,zoom:12}, 
        rating:4.3 
      },
      { 
        id:104, 
        title:'–Ø–Ω–∞—Ä –î–∞–≥ ‚Äî –≥–æ—Ä—è—â–∞—è –≥–æ—Ä–∞', 
        region:'–ë–æ–ª—å—à–æ–π –ö–∞–≤–∫–∞–∑', 
        difficulty:'–õ–µ–≥–∫–æ', 
        duration:'1 –¥–µ–Ω—å', 
        season:'–ó–∏–º–∞', 
        budget:100, 
        elevation:'+80 –º', 
        img:'', 
        coords:{lat:40.493,lng:49.887,zoom:12}, 
        rating:3.9 
      },
      { 
        id:105, 
        title:'–ö–µ–ª—å–±–∞–¥–∂–∞—Ä ‚Äî –º–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏', 
        region:'–ú–∞–ª—ã–π –ö–∞–≤–∫–∞–∑', 
        difficulty:'–°—Ä–µ–¥–Ω–µ', 
        duration:'2-3 –¥–Ω—è', 
        season:'–õ–µ—Ç–æ', 
        budget:360, 
        elevation:'+900 –º', 
        img:'', 
        coords:{lat:40.10,lng:46.05,zoom:11}, 
        rating:4.6 
      },
      { 
        id:108, 
        title:'–ó–∞–Ω–≥–µ–∑—É—Ä—Å–∫–∏–π –ø–µ—Ä–µ–≤–∞–ª', 
        region:'–ú–∞–ª—ã–π –ö–∞–≤–∫–∞–∑', 
        difficulty:'–°–ª–æ–∂–Ω–æ', 
        duration:'2-3 –¥–Ω—è', 
        season:'–û—Å–µ–Ω—å', 
        budget:390, 
        elevation:'+1400 –º', 
        img:'', 
        coords:{lat:39.60,lng:46.20,zoom:11}, 
        rating:3.8 
      },
    ];

    function mockComments(title, rating){
      // –ó–∞–º–µ–Ω–µ–Ω—ã URL-–∞–¥—Ä–µ—Å–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤ –Ω–∞ —ç–º–æ–¥–∑–∏-–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
      const base = [
        {name:'Aydin', handle:'@aydin.hike', avatar:'üë§', text:`–û—Ç–ª–∏—á–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è: ${title}. –†–µ–∫–æ–º–µ–Ω–¥—É—é —Ä–∞–Ω–Ω–∏–π —Å—Ç–∞—Ä—Ç.`, photos:[], rating:Math.max(3.4, Math.min(4.8, rating - 0.2)), helpful:Math.floor(Math.random()*12)+3, notHelpful:Math.floor(Math.random()*3)},
        {name:'Sevda', handle:'@sevda.out', avatar:'üë§', text:'–ú–∞—Ä—à—Ä—É—Ç –±–µ–∑ —Å—é—Ä–ø—Ä–∏–∑–æ–≤, –ø—Ä–∏—Ä–æ–¥–∞ ‚Äî —Å—É–ø–µ—Ä.', photos:[], rating:Math.max(3.4, Math.min(4.8, rating + 0.1)), helpful:Math.floor(Math.random()*10)+2, notHelpful:Math.floor(Math.random()*2)},
      ];
      return base;
    }

    function withDetails(r){
      // –£–¥–∞–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–Ω–∏-–≥–∞–ª–µ—Ä–µ–∏
      const gallery = ``; 
      const spec = `
        <div class="spec"><div class="k">–†–µ–≥–∏–æ–Ω</div><div class="v">${r.region}</div></div>
        <div class="spec"><div class="k">–°–ª–æ–∂–Ω–æ—Å—Ç—å</div><div class="v">${r.difficulty}</div></div>
        <div class="spec"><div class="k">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div><div class="v">${r.duration}</div></div>
        <div class="spec"><div class="k">–°–µ–∑–æ–Ω</div><div class="v">${r.season}</div></div>
        <div class="spec"><div class="k">–ù–∞–±–æ—Ä/–≤—ã—Å–æ—Ç–∞</div><div class="v">${r.elevation||'‚Äî'}</div></div>
        <div class="spec"><div class="k">–ë—é–¥–∂–µ—Ç</div><div class="v">–¥–æ ‚Çº ${r.budget}</div></div>`;
      r.details = (r.details||'') + gallery + spec;
      r.comments = (r.comments||[]).concat(mockComments(r.title, r.rating||4.2));
      return r;
    }

    const routes = routesBase.concat(routesExtra).map(withDetails);

    const routesGrid = document.getElementById('routesGrid');
    const scheduleGrid = document.getElementById('scheduleGrid');

    function renderStars(rating){
      const stars = [];
      const full = Math.floor(rating);
      const frac = rating - full;
      for(let i=0;i<full;i++) stars.push('<svg viewBox="0 0 24 24"><path d="M12 .587l3.668 7.431L24 9.748l-6 5.853 1.417 8.262L12 19.771 4.583 23.863 6 15.601 0 9.748l8.332-1.73z"/></svg>');
      if(frac >= 0.25 && frac < 0.75){
        stars.push('<svg viewBox="0 0 24 24"><defs><linearGradient id="g"><stop offset="50%" stop-color="var(--star)"/><stop offset="50%" stop-color="transparent"/></linearGradient></defs><path fill="url(#g)" d="M12 .587l3.668 7.431L24 9.748l-6 5.853 1.417 8.262L12 19.771 4.583 23.863 6 15.601 0 9.748l8.332-1.73z"/></svg>');
      } else if (frac >= 0.75) {
        stars.push('<svg viewBox="0 0 24 24"><path d="M12 .587l3.668 7.431L24 9.748l-6 5.853 1.417 8.262L12 19.771 4.583 23.863 6 15.601 0 9.748l8.332-1.73z"/></svg>');
      }
      while(stars.length<5) stars.push('<svg viewBox="0 0 24 24" style="opacity:.25"><path d="M12 .587l3.668 7.431L24 9.748l-6 5.853 1.417 8.262L12 19.771 4.583 23.863 6 15.601 0 9.748l8.332-1.73z"/></svg>');
      return `<span class="stars">${stars.join('')}</span><span>${rating.toFixed(1)}</span>`;
    }

    function commentsHtml(list){
      return `
        <div class="comments">
          ${list.map((c,idx)=>`
            <div class="comment">
              <div class="avatar-icon">${c.avatar}</div>
              <div>
                <div class="meta"><b>${c.name}</b><span class="handle">${c.handle}</span><span class="rating">${renderStars(c.rating)}</span></div>
                <div>${c.text}</div>
                <div class="actions">
                  <button class="tag-btn" data-action="helpful" data-index="${idx}">üëç –ü–æ–ª–µ–∑–Ω–æ (${c.helpful||0})</button>
                  <button class="tag-btn" data-action="notHelpful" data-index="${idx}">üëé –ù–µ –ø–æ–ª–µ–∑–Ω–æ (${c.notHelpful||0})</button>
                </div>
              </div>
            </div>
          `).join('')}
          ${list.length>1 ? `<button class="tag-btn" data-action="moreComments">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button>`:''}
        </div>
      `;
    }

    function routeCard(r){
      return `
        <div class="card reveal">
          <div class="card-body">
            <b style="font-size:18px">${r.title}</b>
            <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
              <div class="pill">üìç ${r.region}</div>
              <div class="pill">‚öôÔ∏è ${r.difficulty}</div>
              <div class="pill">üïí ${r.duration}</div>
              <div class="pill">üçÇ ${r.season}</div>
              <div class="pill">‚¨ÜÔ∏è ${r.elevation||'‚Äî'}</div>
              <div class="pill">‚Çº ${r.budget}</div>
              <div class="pill">‚≠ê ${r.rating.toFixed(1)}</div>
            </div>
            <details class="summary-card" style="margin-top:8px">
              <summary>–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∞</summary>
              <div style="margin-top:10px">${r.details}</div>
              ${r.comments ? commentsHtml(r.comments) : ''}
              <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
                <button class="btn" data-action="map" data-id="${r.id}">–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ</button>
                <button class="btn btn-outline" data-action="book" data-id="${r.id}">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
              </div>
            </details>
          </div>
        </div>
      `;
    }

    function scheduleCard(r){
      return `
        <div class="card reveal">
          <div class="card-body">
            <div class="card-row" style="grid-template-columns:1fr; gap:10px">
              <div>
                <b>${r.title}</b>
                <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:6px">
                  <div class="pill">‚öôÔ∏è ${r.difficulty}</div>
                  <div class="pill">‚Çº ${r.budget}</div>
                  <div class="pill">üïí ${r.duration}</div>
                  <div class="pill">‚≠ê ${r.rating.toFixed(1)}</div>
                </div>
                <div style="display:flex;gap:8px;margin-top:10px">
                  <button class="btn" data-action="book" data-id="${r.id}">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É</button>
                  <button class="btn btn-outline" data-action="map" data-id="${r.id}">–ö–∞—Ä—Ç–∞</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderRoutes(list){ routesGrid.innerHTML = list.map(routeCard).join(''); observeReveals(); }
    function renderSchedule(list){ scheduleGrid.innerHTML = list.map(scheduleCard).join(''); observeReveals(); }

    const F = { region:"", diff:"", dur:"", season:"", budget:200 };
    const qs = id=>document.getElementById(id);
    const fRegion=qs('fRegion'), fDiff=qs('fDiff'), fDur=qs('fDur'), fSeason=qs('fSeason'), fBudget=qs('fBudget');
    const fRegionLabel=qs('fRegionLabel'), fDiffLabel=qs('fDiffLabel'), fDurLabel=qs('fDurLabel'), fSeasonLabel=qs('fSeasonLabel'), fBudgetLabel=qs('fBudgetLabel');

    function applyFilters(){
      const filtered = routes.filter(r =>
        (!F.region || r.region===F.region) &&
        (!F.diff || r.difficulty===F.diff) &&
        (!F.dur || r.duration===F.dur) &&
        (!F.season || r.season===F.season) &&
        (r.budget <= F.budget)
      );
      renderRoutes(filtered);
      renderSchedule(filtered);
    }
    fRegion.addEventListener('change', ()=>{ F.region=fRegion.value; fRegionLabel.textContent = fRegion.value || '–õ—é–±–æ–π'; applyFilters(); });
    fDiff.addEventListener('change', ()=>{ F.diff=fDiff.value; fDiffLabel.textContent = fDiff.value || '–õ—é–±–∞—è'; applyFilters(); });
    fDur.addEventListener('change', ()=>{ F.dur=fDur.value; fDurLabel.textContent = fDur.value || '–õ—é–±–∞—è'; applyFilters(); });
    fSeason.addEventListener('change', ()=>{ F.season=fSeason.value; fSeasonLabel.textContent = fSeason.value || '–õ—é–±–æ–π'; applyFilters(); });
    fBudget.addEventListener('input', ()=>{ F.budget=+fBudget.value; fBudgetLabel.textContent = '‚â§ ' + F.budget; applyFilters(); });

    function startBooking(id){
      const r = routes.find(x=>x.id===id); if(!r) return;
      qs('bkRoute').value = r.title;
      const dateInput = qs('bkDate');
      dateInput.value = '';
      const t=new Date(); const yyyy=t.getFullYear(); const mm=String(t.getMonth()+1).padStart(2,'0'); const dd=String(t.getDate()).padStart(2,'0');
      dateInput.min = `${yyyy}-${mm}-${dd}`;
      openModal('bookingModal');
    }

    function openMap(id){
      const r = routes.find(x=>x.id===id); if(!r) return;
      qs('mapTitle').textContent = r.title;
      const {lat,lng}=r.coords;
      const url = `https://www.openstreetmap.org/export/embed.html?bbox=${lng-0.5}%2C${lat-0.35}%2C${lng+0.5}%2C${lat+0.35}&layer=mapnik&marker=${lat}%2C${lng}`;
      qs('mapWrap').innerHTML = '<iframe title="Map" style="border:0;width:100%;height:100%" src="'+url+'"></iframe>';
      openModal('mapModal');
    }

    function openModal(id){ document.getElementById(id).classList.add('open'); }
    function closeModal(id){ document.getElementById(id).classList.remove('open'); }
    ['bookingModal','mapModal'].forEach(id=>{
      const el=document.getElementById(id);
      el.addEventListener('click',e=>{ if(e.target===el) closeModal(id); });
    });

    const root=document.documentElement, themeToggle=document.getElementById('themeToggle');
    function setTheme(m){ root.setAttribute('data-theme',m); localStorage.setItem('smarttour-theme',m); }
    function initTheme(){ const s=localStorage.getItem('smarttour-theme'); if(s) setTheme(s); else setTheme(window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light'); }
    function toggleTheme(){ setTheme(root.getAttribute('data-theme')==='dark'?'light':'dark'); }
    themeToggle.addEventListener('click', toggleTheme);
    themeToggle.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); toggleTheme(); }});
    const azTimeEl=document.getElementById('azTime');
    function updateAzTime(){
      try{
        const t=new Date();
        const s=new Intl.DateTimeFormat('ru-RU',{timeZone:'Asia/Baku',hour:'2-digit',minute:'2-digit',second:'2-digit',day:'2-digit',month:'2-digit',year:'numeric'}).format(t).replace(',', ' ‚Ä¢');
        if(azTimeEl) azTimeEl.textContent=s;
      }catch(e){ azTimeEl.textContent=new Date().toLocaleString('ru-RU'); }
    }
    setInterval(updateAzTime,1000);

    const views={home:document.getElementById('view-home'), routes:document.getElementById('view-routes'), schedule:document.getElementById('view-schedule'), safety:document.getElementById('view-safety')};
    function setActiveLink(hash){ document.querySelectorAll('[data-route]').forEach(a=>a.classList.remove('active')); const l=document.querySelector(`[href="${hash}"][data-route]`); if(l) l.classList.add('active'); }
    function showView(name){ Object.values(views).forEach(v=>v.classList.add('hide')); (views[name]||views.home).classList.remove('hide'); window.scrollTo({top:0,behavior:'smooth'}); observeReveals(); }
    function handleRoute(){ const hash=(location.hash||'#home').replace('#',''); setActiveLink('#'+hash); showView(hash); if(hash==='routes'||hash==='schedule'){ applyFilters(); } }
    window.addEventListener('hashchange', handleRoute);

    document.addEventListener('click', (e)=>{
      const trg = e.target.closest('button,.btn,.cta,.btn-outline,a[data-route]'); 
      if(trg && trg.matches('button,.btn,.cta,.btn-outline')){
        const rect = trg.getBoundingClientRect(); trg.style.setProperty('--x',(e.clientX-rect.left)+'px'); trg.style.setProperty('--y',(e.clientY-rect.top)+'px');
        trg.classList.remove('ripple'); void trg.offsetWidth; trg.classList.add('ripple'); setTimeout(()=>trg.classList.remove('ripple'),400);
      }
      if(!trg) return;
      const id = parseInt(trg.getAttribute('data-id'),10); 
      const action = trg.getAttribute('data-action');
      if(action==='book') startBooking(id);
      if(action==='map') openMap(id);
      if(trg.dataset.action==='moreComments'){ alert('–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã...'); }
      if(trg.dataset.action==='helpful' || trg.dataset.action==='notHelpful'){
        trg.textContent = trg.textContent.replace(/\d+/, m=>parseInt(m)+1);
      }
    });

    function observeReveals(){ const els=document.querySelectorAll('.reveal'); const io=new IntersectionObserver(es=>{ es.forEach(en=>{ if(en.isIntersecting){ en.target.classList.add('in'); io.unobserve(en.target);} }); },{threshold:.08}); els.forEach(el=>{ if(!el.classList.contains('in')) io.observe(el); }); }

    function init(){ initTheme(); updateAzTime(); applyFilters(); observeReveals(); handleRoute(); }
    init();

    document.getElementById('submitBookingBtn').addEventListener('click', ()=>{
      const route = document.getElementById('bkRoute').value.trim();
      const date = document.getElementById('bkDate').value;
      const name = document.getElementById('bkName').value.trim();
      const phone = document.getElementById('bkPhone').value.trim();
      if(!route || !date || !name || !phone){ alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç, –¥–∞—Ç—É, –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω.'); return; }
      closeModal('bookingModal'); setTimeout(()=>alert(`–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞:\n–ú–∞—Ä—à—Ä—É—Ç: ${route}\n–î–∞—Ç–∞: ${date}\n–ò–º—è: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`),120);
    });
  </script>
</body>
</html>